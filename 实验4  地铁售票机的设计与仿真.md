
## 实验4  地铁售票机的设计与仿真

## 实验目的：

1. 熟悉工具软件的使用方法。

2. 熟悉设计语言的编程方法。

## 实验要求：

1. 设计电路完成任务的逻辑功能。

2. 得出仿真结论。

## 实验任务：
设计武汉市1、2号地铁线的自动售票机系统。

## 售票流程为：

1. 输入出发站和目的站的代码。
2. 输入票数，单次购票上限为4张。
3. 投币，只能投10元、5元或1元，一次一枚。
4. 自动计算票价和找零，找零单位：只能为1元。
5. 输出：票和零币（取消购票时，退币单位还是元）

## 设计提示： 

1. 输入信号可设置为四类：

	1. 站点信息，包含出发和目的站两个，站点信息应包括：
	
		1.方向信号，两位，代表从换乘站出发的四个方向。
		
		2.站点编码，四位，代表从换乘站到本站的站数。
		
	2. 票数信息
	
		两位二进制代码
	3. 投币信息
		10元、5元或1元三个串行输入端，根据脉冲数计算投币总额。
		票价按武汉市现行标准计价。
	4. 确认和取消购票按钮各1。
		附图：
		
		![](https://github.com/ashuihui/Fpga_study/blob/master/PNG/4_1.png)
			
		图1 武汉市地铁1、2号线站点分布图
			
		![](https://github.com/ashuihui/Fpga_study/blob/master/PNG/4_1.png)
			
		图2 武汉市地铁1、2号线票价图
			
	5. 为简化计算，现将计价原则修改为：
		1. 实际乘坐1~8站时，单价2元；
		2. 实际乘坐9~16站时，单价3元；
		3. 实际乘坐17~24站时，单价4元；
		4. 实际乘坐25站以上（含25站）时，单价5元；
		
2. 输出信号可设置为两类：
	1. 出票
		在投币充足时，按需求输出票数；投币不足时，不出票。
	2. 找零
		确认购票，且投币充足时，输出购票后的余额；否则退出全额已投金额。
## 设计要求：
1. 用开关模拟实现所有输入信号；
2. 用数码管显示：
		1. 站点信息
		2. 购票张数
		3. 投币金额总计
		4. 票价总额
		5. 出票张数
		6. 找零总额


## 代码

[地铁售票机的设计与仿真code](https://github.com/ashuihui/Fpga_study/blob/master/CODE/dt.v)

## 波形图

![](https://github.com/ashuihui/Fpga_study/blob/master/PNG/last4_1.JPG)
![](https://github.com/ashuihui/Fpga_study/blob/master/PNG/last4_2.JPG)